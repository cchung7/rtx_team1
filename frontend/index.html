<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="County-level Air Quality Prediction (CLAP) System">
    <title>CLAP - Air Quality Prediction Dashboard</title>
    <link rel="stylesheet" href="styles.css?v=20251008">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1>
                    <span class="logo">üåç</span>
                    CLAP - Air Quality Prediction
                </h1>
                <p class="subtitle">County-level Next-Day AQI Forecasting System</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- County Selection Section -->
        <section class="selection-section">
            <div class="card">
                <h2>Select Location & Model</h2>
                <div class="form-group">
                    <label for="model-select">Model:</label>
                    <select id="model-select" class="form-control" aria-label="Select model">
                        <option value="balanced">Balanced Model (R¬≤ = 0.72) ‚≠ê</option>
                        <option value="prototype">Prototype Model (R¬≤ = 0.46)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="county-select">County:</label>
                    <select id="county-select" class="form-control" aria-label="Select county">
                        <option value="">-- Select a County --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="forecast-days">Forecast Period:</label>
                    <select id="forecast-days" class="form-control" aria-label="Select forecast period">
                        <option value="1">Next Day (1 day)</option>
                        <option value="3">Next 3 Days</option>
                        <option value="7">Next Week (7 days)</option>
                        <option value="14">Next 2 Weeks (14 days)</option>
                    </select>
                </div>
                <div class="button-group">
                    <button id="refresh-btn" class="btn btn-primary" aria-label="Generate forecast">
                        <span class="btn-icon">üîÆ</span> Generate Forecast
                    </button>
                    <button id="load-btn" class="btn btn-secondary" aria-label="Load historical data">
                        <span class="btn-icon">üìä</span> Load Data
                    </button>
                </div>
            </div>
        </section>

        <!-- Loading Indicator -->
        <div id="loading" class="loading-spinner" role="status" aria-live="polite">
            <div class="spinner"></div>
            <p>Loading data...</p>
        </div>

        <!-- Error Message -->
        <div id="error-message" class="alert alert-error" role="alert" aria-live="assertive"></div>

        <!-- Prediction Results Section -->
        <section id="prediction-section" class="prediction-section" style="display: none;">
            <div class="card">
                <h2 id="forecast-title">Next-Day AQI Prediction</h2>
                <div class="prediction-grid">
                    <!-- Predicted AQI Value -->
                    <div class="prediction-card">
                        <div class="prediction-label">Predicted AQI</div>
                        <div id="predicted-aqi" class="prediction-value" aria-label="Predicted Air Quality Index value">
                            --
                        </div>
                        <div id="predicted-category" class="prediction-category" aria-label="Predicted AQI category">
                            --
                        </div>
                        <div id="forecast-date" class="forecast-date">
                            --
                        </div>
                    </div>

                    <!-- Category Probabilities -->
                    <div class="probabilities-card">
                        <h3>Category Probabilities</h3>
                        <div id="probabilities-list" class="probabilities-list" aria-label="Probability distribution for each AQI category">
                            <!-- Populated dynamically -->
                        </div>
                    </div>
                </div>

                <!-- AQI Legend -->
                <div class="aqi-legend">
                    <h3>EPA AQI Categories</h3>
                    <div class="legend-grid">
                        <div class="legend-item" data-category="Good">
                            <span class="legend-color" style="background-color: #00E400;" aria-hidden="true"></span>
                            <span class="legend-text">Good (0-50)</span>
                        </div>
                        <div class="legend-item" data-category="Moderate">
                            <span class="legend-color" style="background-color: #FFFF00;" aria-hidden="true"></span>
                            <span class="legend-text">Moderate (51-100)</span>
                        </div>
                        <div class="legend-item" data-category="Unhealthy for Sensitive Groups">
                            <span class="legend-color" style="background-color: #FF7E00;" aria-hidden="true"></span>
                            <span class="legend-text">Unhealthy for Sensitive Groups (101-150)</span>
                        </div>
                        <div class="legend-item" data-category="Unhealthy">
                            <span class="legend-color" style="background-color: #FF0000;" aria-hidden="true"></span>
                            <span class="legend-text">Unhealthy (151-200)</span>
                        </div>
                        <div class="legend-item" data-category="Very Unhealthy">
                            <span class="legend-color" style="background-color: #8F3F97;" aria-hidden="true"></span>
                            <span class="legend-text">Very Unhealthy (201-300)</span>
                        </div>
                        <div class="legend-item" data-category="Hazardous">
                            <span class="legend-color" style="background-color: #7E0023;" aria-hidden="true"></span>
                            <span class="legend-text">Hazardous (301-500)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Multi-Day Forecast Section -->
        <section id="multi-day-section" class="chart-section" style="display: none;">
            <div class="card">
                <h2 id="multi-day-title">Multi-Day AQI Forecast</h2>
                <div class="chart-container">
                    <canvas id="multi-day-chart" aria-label="Line chart showing multi-day AQI forecast"></canvas>
                </div>
                <div id="multi-day-summary" class="forecast-summary">
                    <!-- Forecast summary will be inserted here -->
                </div>
            </div>
        </section>

        <!-- Historical Data Chart Section -->
        <section id="chart-section" class="chart-section" style="display: none;">
            <div class="card">
                <h2>30-Day Historical AQI Trend</h2>
                <div class="chart-container">
                    <canvas id="aqi-chart" aria-label="Line chart showing 30-day historical AQI values"></canvas>
                </div>
                <div id="chart-stats" class="chart-stats">
                    <!-- Statistics populated dynamically -->
                </div>
            </div>
        </section>

        <!-- Model Information Section -->
        <section id="model-info-section" class="info-section">
            <div class="card">
                <h2>Model Information</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Algorithm:</span>
                        <span class="info-value">LightGBM (Gradient Boosting Decision Tree)</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">MSE:</span>
                        <span class="info-value" id="model-mse">179.00</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">RMSE:</span>
                        <span class="info-value" id="model-rmse">~13 AQI units</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">R¬≤ Score:</span>
                        <span class="info-value" id="model-r2">0.46</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Raytheon Team A - UTD SE 4485.001</p>
            <p class="team-members">
                David Santos ‚Ä¢ Amelia Quinn ‚Ä¢ Kevin Melo ‚Ä¢ AJ Kimbrough ‚Ä¢ Andrew Enright ‚Ä¢ Jay Chung
            </p>
        </div>
    </footer>

    <script src="app.js?v=20251008e"></script>
</body>
</html>

